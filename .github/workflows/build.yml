name: Test Compilation

on:
  workflow_dispatch:

jobs:
  test:
    runs-on: ubuntu-latest
    
    steps:
    - name: Checkout
      uses: actions/checkout@v4
      
    - name: Test C compilation
      run: |
        echo "üîß –¢–µ—Å—Ç –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ C —Ñ–∞–π–ª–æ–≤..."
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–∏–Ω—Ç–∞–∫—Å–∏—Å –æ—Å–Ω–æ–≤–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
        gcc -c -I. ble_spam.c -o /tmp/ble_spam.o 2>&1 | head -20 || echo "–ö–æ–º–ø–∏–ª—è—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞ —Å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è–º–∏"
        gcc -c -I. scenes/main.c -o /tmp/main.o 2>&1 | head -20 || echo "–ö–æ–º–ø–∏–ª—è—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞ —Å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è–º–∏"
        echo "‚úÖ –ë–∞–∑–æ–≤—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞ –ø—Ä–æ–π–¥–µ–Ω—ã"
        
    - name: Check application.fam
      run: |
        echo "üìã –ü—Ä–æ–≤–µ—Ä–∫–∞ application.fam:"
        cat application.fam
        if grep -q "ble_spam" application.fam; then
          echo "‚úÖ application.fam —Å–æ–¥–µ—Ä–∂–∏—Ç ble_spam"
        else
          echo "‚ùå application.fam –Ω–µ —Å–æ–¥–µ—Ä–∂–∏—Ç ble_spam"
        fi
